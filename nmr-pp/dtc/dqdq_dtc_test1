; 27 October 2022
; Andrew Stasiuk

; DQ-DQ correlation under Hamiltonian (cnst1)*(XX - YY)
; Additonal 90 degree z kicking

define delay tau1
"tau1=d3-p1/2"
define delay tau2
"tau2=d3*(1-cnst1)-p1"
define delay tau3
"tau3=2*d3*(1+cnst1)-p1"

define delay cycle
"cycle=24*d3"

"l10=0"

1  ze

2  d1 rpp3 rpp4 rpp5 rpp6
   cycle pl2:f2

   (p1 ph0):f2
   d2
   (p2 ph1):f2
   1m
   (p1 ph2):f2
   2.5u

3
   tau1
   (p1 ph3^):f2
   tau2
   (p1 ph4^):f2
   tau3
   (p1 ph5^):f2
   tau2
   (p1 ph6^):f2
   tau1

   tau1
   (p1 ph7^):f2
   tau2
   (p1 ph8^):f2
   tau3
   (p1 ph9^):f2
   tau2
   (p1 ph10^):f2
   tau1

   lo to 3 times l10

   (p1 ph29):f2
   1m
   (p2 ph30):f2

   go=2 ph31

  1m wr #0 if #0

; increase counter
  1m iu10
  1m iu10
;increment
  25m ip29*270

  lo to 2 times td1

  exit

ph0 = {0}*8
ph1 = {1}*8
ph2 = 1 2 1 2 3 0 3 0

ph3 = (360) 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0
ph4 = (360) 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90
ph5 = (360) 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90
ph6 = (360) 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0
ph7 = (360) 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0
ph8 = (360) 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90
ph9 = (360) 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90
ph10 = (360) 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0 90 270 0 180 270 90 180 0

ph29 = 3 0 0 3 1 2 2 1
ph30 = {1}*4 {3}*4
ph31 = 0 0 2 2 2 2 0 0
