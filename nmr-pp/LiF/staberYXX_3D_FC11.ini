; 13 June 2024
; Andrew Stasiuk

; delays
define delay delay0
"delay0=(d20-p1)/2"
define delay delay1
"delay1=d20-p1"

"l1=6"

"l2=1"

1  ze

2   ; state & pp reset delay
    d1 rpp1 rpp2 rpp3 rpp4 rpp15 rpp16 rpp17 rpp18
    100u pl2:f2

; Random Zeeman State Preparation
    (p1 ph0):f2

3 ; repeated ken to encode disorder
    delay0
    (p1 ph1^):f2
    delay1
    (p1 ph2^):f2
    delay1
    (p1 ph3^):f2
    delay1
    (p1 ph4^):f2
    delay0

    lo to 3 times l1

    (p1 ph5):f2
    

; Hamiltonian Evolution
4  10u

   lo to 4 times l2

; Random Zeeman Observable Engineering
    (p1 ph14):f2

5 ; repeated ken to disorder observable
    delay0
    (p1 ph15^):f2
    delay1
    (p1 ph16^):f2
    delay1
    (p1 ph17^):f2
    delay1
    (p1 ph18^):f2
    delay0

    lo to 5 times l1

    ; shelf in Z, then measure
    (p1 ph19):f2
    1m
    (p1 ph29):f2
    20u
    (p1 ph30):f2

    go=2 ph31
    1m wr #0 if #0

    5m iu2
    lo to 2 times td2

    5m ru2

    25m ip5*132
    25m ip14*132
    25m ip15*132
    25m ip16*132
    25m ip17*132
    25m ip18*132
    25m ip19*264

    ; increment ken time
    5m iu1
    5m iu1
    5m iu1
    lo to 2 times td1

  exit


ph0 = (360) 90 90 270 270 0 0 180 180

ph1 = (360) 101 55 189 233 187 321 5 319 93 137 91 225 269 223 357 41 355 129 173 127 261 305 259 33 77 31 165 209 163 297 341 295 69 113 67 201 245 199 333 17 331 105 149 103 237 281 235 9 53 7 141 185 139 273 317 271 45 89 43 177
ph2 = (360) 22 66 290 154 198 62 286 330 194 58 102 326 190 234 98 322 6 230 94 138 2 226 270 134 358 42 266 130 174 38 262 306 170 34 78 302 166 210 74 298 342 206 70 114 338 202 246 110 334 18 242 106 150 14 238 282 146 10 54 278
ph3 = (360) 33 257 301 165 29 73 297 161 205 69 293 337 201 65 109 333 197 241 105 329 13 237 101 145 9 233 277 141 5 49 273 137 181 45 269 313 177 41 85 309 173 217 81 305 349 213 77 121 345 209 253 117 341 25 249 113 157 21 245 289
ph4 = (360) 314 268 42 86 40 174 218 172 306 350 304 78 122 76 210 254 208 342 26 340 114 158 112 246 290 244 18 62 16 150 194 148 282 326 280 54 98 52 186 230 184 318 2 316 90 134 88 222 266 220 354 38 352 126 170 124 258 302 256 30

ph5 = (360) 143 143 323 323 53 53 233 233

ph14 = (360) 154 154 154 154 154 154 154 154 334 334 334 334 334 334 334 334

ph15 = (360) 255 209 343 27 341 115 159 113 247 291 245 19 63 17 151 195 149 283 327 281 55 99 53 187 231 185 319 3 317 91 135 89 223 267 221 355 39 353 127 171 125 259 303 257 31 75 29 163 207 161 295 339 293 67 111 65 199 243 197 331
ph16 = (360) 176 220 84 308 352 216 80 124 348 212 256 120 344 28 252 116 160 24 248 292 156 20 64 288 152 196 60 284 328 192 56 100 324 188 232 96 320 4 228 92 136 0 224 268 132 356 40 264 128 172 36 260 304 168 32 76 300 164 208 72
ph17 = (360) 187 51 95 319 183 227 91 315 359 223 87 131 355 219 263 127 351 35 259 123 167 31 255 299 163 27 71 295 159 203 67 291 335 199 63 107 331 195 239 103 327 11 235 99 143 7 231 275 139 3 47 271 135 179 43 267 311 175 39 83
ph18 = (360) 108 62 196 240 194 328 12 326 100 144 98 232 276 230 4 48 2 136 180 134 268 312 266 40 84 38 172 216 170 304 348 302 76 120 74 208 252 206 340 24 338 112 156 110 244 288 242 16 60 14 148 192 146 280 324 278 52 96 50 184

ph19 = (360) 207 207 207 207 207 207 207 207 27 27 27 27 27 27 27 27

ph29 = 0 2
ph30 = 1 3
ph31 = 0 2