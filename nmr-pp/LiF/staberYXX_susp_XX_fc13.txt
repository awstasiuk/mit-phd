; STABER sequence test (name pending)
; discovered by lance berkey
; 10 July 2024

; delays
define delay delay0
"delay0=(d20-p1)/2"
define delay delay1
"delay1=d20-p1"
"l1=0"

1  ze

2   ; state & pp reset delay
    d1 rpp0 rpp1 rpp2 rpp3
    100u pl2:f2

    (p1 ph0):f2
    1.5u

3   ; sequence
    delay0
    (p1 ph1^):f2
    delay1
    (p1 ph2^):f2
    delay1
    (p1 ph3^):f2
    delay1
    (p1 ph4^):f2
    delay0

    delay0
    (p1 ph1^):f2
    delay1
    (p1 ph2^):f2
    delay1
    (p1 ph3^):f2
    delay1
    (p1 ph4^):f2
    delay0

    delay0
    (p1 ph1^):f2
    delay1
    (p1 ph2^):f2
    delay1
    (p1 ph3^):f2
    delay1
    (p1 ph4^):f2
    delay0
    
    lo to 3 times l1

    1.5u
    (p1 ph5):f2

    ; kill transients
    1m

    ; measure
    (p1 ph29):f2
    20u
    (p1 ph30):f2

    go=2 ph31
    1m wr #0 if #0

    ; increase evolution time by 2 cycle length, and re-scan
    1m iu1
    1m iu1
    25m ip5*312
    lo to 2 times td1

    exit

; phase programs

ph0 = (360) 90 270

ph1 = (360) 103 65 207 349 41 273 55 17 159 301 353 225 7 329 111 253 305 177 319 281 63 205 257 129 271 233 15 157 209 81 223 185 327 109 161 33 175 137 279 61 113 345 127 89 231 13 65 297 79 41 183 325 17 249 31 353 135 277 329 201 343 305 87 229 281 153 295 257 39 181 233 105 247 209 351 133 185 57 199 161 303 85 137 9 151 113 255 37 89 321 103 65 207 349 41 273 55 17 159 301 353 225 7 329 111 253 305 177 319 281 63 205 257 129 271 233 15 157 209 81 223 185 327 109 161 33 175 137 279 61 113 345 127 89 231 13 65 297 79 41 183 325 17 249 31 353 135 277 329 201 343 305 87 229 281 153 295 257 39 181 233 105 247 209 351 133 185 57 199 161 303 85 137 9 151 113 255 37 89 321 103 65 207 349 41 273 55 17 159 301 353 225 7 329 111 253 305 177 319 281 63 205 257 129 271 233 15 157 209 81 223 185 327 109 161 33 175 137 279 61 113 345 127 89 231 13 65 297 79 41 183 325 17 249 31 353 135 277 329 201 343 305 87 229 281 153 295 257 39 181 233 105 247 209 351 133 185 57 199 161 303 85 137 9 151 113 255 37 89 321 103 65 207 349 41 273 55 17 159 301 353 225 7 329 111 253 305 177 319 281 63 205 257 129 271 233 15 157 209 81
ph2 = (360) 26 78 310 2 144 196 338 30 262 314 96 148 290 342 214 266 48 100 242 294 166 218 0 52 194 246 118 170 312 4 146 198 70 122 264 316 98 150 22 74 216 268 50 102 334 26 168 220 2 54 286 338 120 172 314 6 238 290 72 124 266 318 190 242 24 76 218 270 142 194 336 28 170 222 94 146 288 340 122 174 46 98 240 292 74 126 358 50 192 244 26 78 310 2 144 196 338 30 262 314 96 148 290 342 214 266 48 100 242 294 166 218 0 52 194 246 118 170 312 4 146 198 70 122 264 316 98 150 22 74 216 268 50 102 334 26 168 220 2 54 286 338 120 172 314 6 238 290 72 124 266 318 190 242 24 76 218 270 142 194 336 28 170 222 94 146 288 340 122 174 46 98 240 292 74 126 358 50 192 244 26 78 310 2 144 196 338 30 262 314 96 148 290 342 214 266 48 100 242 294 166 218 0 52 194 246 118 170 312 4 146 198 70 122 264 316 98 150 22 74 216 268 50 102 334 26 168 220 2 54 286 338 120 172 314 6 238 290 72 124 266 318 190 242 24 76 218 270 142 194 336 28 170 222 94 146 288 340 122 174 46 98 240 292 74 126 358 50 192 244 26 78 310 2 144 196 338 30 262 314 96 148 290 342 214 266 48 100 242 294 166 218 0 52 194 246 118 170 312 4
ph3 = (360) 39 271 323 285 337 299 351 223 275 237 289 251 303 175 227 189 241 203 255 127 179 141 193 155 207 79 131 93 145 107 159 31 83 45 97 59 111 343 35 357 49 11 63 295 347 309 1 323 15 247 299 261 313 275 327 199 251 213 265 227 279 151 203 165 217 179 231 103 155 117 169 131 183 55 107 69 121 83 135 7 59 21 73 35 87 319 11 333 25 347 39 271 323 285 337 299 351 223 275 237 289 251 303 175 227 189 241 203 255 127 179 141 193 155 207 79 131 93 145 107 159 31 83 45 97 59 111 343 35 357 49 11 63 295 347 309 1 323 15 247 299 261 313 275 327 199 251 213 265 227 279 151 203 165 217 179 231 103 155 117 169 131 183 55 107 69 121 83 135 7 59 21 73 35 87 319 11 333 25 347 39 271 323 285 337 299 351 223 275 237 289 251 303 175 227 189 241 203 255 127 179 141 193 155 207 79 131 93 145 107 159 31 83 45 97 59 111 343 35 357 49 11 63 295 347 309 1 323 15 247 299 261 313 275 327 199 251 213 265 227 279 151 203 165 217 179 231 103 155 117 169 131 183 55 107 69 121 83 135 7 59 21 73 35 87 319 11 333 25 347 39 271 323 285 337 299 351 223 275 237 289 251 303 175 227 189 241 203 255 127 179 141 193 155 207 79 131 93 145 107
ph4 = (360) 322 284 66 28 260 312 274 236 18 340 212 264 226 188 330 292 164 216 178 140 282 244 116 168 130 92 234 196 68 120 82 44 186 148 20 72 34 356 138 100 332 24 346 308 90 52 284 336 298 260 42 4 236 288 250 212 354 316 188 240 202 164 306 268 140 192 154 116 258 220 92 144 106 68 210 172 44 96 58 20 162 124 356 48 10 332 114 76 308 0 322 284 66 28 260 312 274 236 18 340 212 264 226 188 330 292 164 216 178 140 282 244 116 168 130 92 234 196 68 120 82 44 186 148 20 72 34 356 138 100 332 24 346 308 90 52 284 336 298 260 42 4 236 288 250 212 354 316 188 240 202 164 306 268 140 192 154 116 258 220 92 144 106 68 210 172 44 96 58 20 162 124 356 48 10 332 114 76 308 0 322 284 66 28 260 312 274 236 18 340 212 264 226 188 330 292 164 216 178 140 282 244 116 168 130 92 234 196 68 120 82 44 186 148 20 72 34 356 138 100 332 24 346 308 90 52 284 336 298 260 42 4 236 288 250 212 354 316 188 240 202 164 306 268 140 192 154 116 258 220 92 144 106 68 210 172 44 96 58 20 162 124 356 48 10 332 114 76 308 0 322 284 66 28 260 312 274 236 18 340 212 264 226 188 330 292 164 216 178 140 282 244 116 168 130 92 234 196 68 120

ph5 = (360) 283 103

ph29 = (360) 0 180
ph30 = (360) 90 270
ph31 = 0 2