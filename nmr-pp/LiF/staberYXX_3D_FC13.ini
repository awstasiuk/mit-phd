; 13 June 2024
; Andrew Stasiuk

; delays
define delay delay0
"delay0=(d20-p1)/2"
define delay delay1
"delay1=d20-p1"

"l1=6"

"l2=1"

1  ze

2   ; state & pp reset delay
    d1 rpp1 rpp2 rpp3 rpp4 rpp15 rpp16 rpp17 rpp18
    100u pl2:f2

; Random Zeeman State Preparation
    (p1 ph0):f2

3 ; repeated ken to encode disorder
    delay0
    (p1 ph1^):f2
    delay1
    (p1 ph2^):f2
    delay1
    (p1 ph3^):f2
    delay1
    (p1 ph4^):f2
    delay0

    lo to 3 times l1

    (p1 ph5):f2
    

; Hamiltonian Evolution
4  10u

   lo to 4 times l2

; Random Zeeman Observable Engineering
    (p1 ph14):f2

5 ; repeated ken to disorder observable
    delay0
    (p1 ph15^):f2
    delay1
    (p1 ph16^):f2
    delay1
    (p1 ph17^):f2
    delay1
    (p1 ph18^):f2
    delay0

    lo to 5 times l1

    ; shelf in Z, then measure
    (p1 ph19):f2
    1m
    (p1 ph29):f2
    20u
    (p1 ph30):f2

    go=2 ph31
    1m wr #0 if #0

    5m iu2
    lo to 2 times td2

    5m ru2

    25m ip5*156
    25m ip14*156
    25m ip15*156
    25m ip16*156
    25m ip17*156
    25m ip18*156
    25m ip19*312

    ; increment ken time
    5m iu1
    5m iu1
    5m iu1
    lo to 2 times td1

  exit


ph0 = (360) 90 90 270 270 0 0 180 180

ph1 = (360) 103 65 207 259 221 3 55 17 159 211 173 315 7 329 111 163 125 267 319 281 63 115 77 219 271 233 15 67 29 171 223 185 327 19 341 123 175 137 279 331 293 75 127 89 231 283 245 27 79 41 183 235 197 339 31 353 135 187 149 291
ph2 = (360) 26 78 310 182 234 106 338 30 262 134 186 58 290 342 214 86 138 10 242 294 166 38 90 322 194 246 118 350 42 274 146 198 70 302 354 226 98 150 22 254 306 178 50 102 334 206 258 130 2 54 286 158 210 82 314 6 238 110 162 34
ph3 = (360) 39 271 323 195 67 119 351 223 275 147 19 71 303 175 227 99 331 23 255 127 179 51 283 335 207 79 131 3 235 287 159 31 83 315 187 239 111 343 35 267 139 191 63 295 347 219 91 143 15 247 299 171 43 95 327 199 251 123 355 47
ph4 = (360) 322 284 66 118 80 222 274 236 18 70 32 174 226 188 330 22 344 126 178 140 282 334 296 78 130 92 234 286 248 30 82 44 186 238 200 342 34 356 138 190 152 294 346 308 90 142 104 246 298 260 42 94 56 198 250 212 354 46 8 150

ph5 = (360) 169 169 349 349 79 79 259 259

ph14 = (360) 182 182 182 182 182 182 182 182 2 2 2 2 2 2 2 2

ph15 = (360) 285 247 29 81 43 185 237 199 341 33 355 137 189 151 293 345 307 89 141 103 245 297 259 41 93 55 197 249 211 353 45 7 149 201 163 305 357 319 101 153 115 257 309 271 53 105 67 209 261 223 5 57 19 161 213 175 317 9 331 113
ph16 = (360) 208 260 132 4 56 288 160 212 84 316 8 240 112 164 36 268 320 192 64 116 348 220 272 144 16 68 300 172 224 96 328 20 252 124 176 48 280 332 204 76 128 0 232 284 156 28 80 312 184 236 108 340 32 264 136 188 60 292 344 216
ph17 = (360) 221 93 145 17 249 301 173 45 97 329 201 253 125 357 49 281 153 205 77 309 1 233 105 157 29 261 313 185 57 109 341 213 265 137 9 61 293 165 217 89 321 13 245 117 169 41 273 325 197 69 121 353 225 277 149 21 73 305 177 229
ph18 = (360) 144 106 248 300 262 44 96 58 200 252 214 356 48 10 152 204 166 308 0 322 104 156 118 260 312 274 56 108 70 212 264 226 8 60 22 164 216 178 320 12 334 116 168 130 272 324 286 68 120 82 224 276 238 20 72 34 176 228 190 332

ph19 = (360) 261 261 261 261 261 261 261 261 81 81 81 81 81 81 81 81

ph29 = 0 2
ph30 = 1 3
ph31 = 0 2